<?xml version="1.0" ?>
<robot name="My robot" xmlns:xacro="http://ros.org/wiki/xacro">
    <webots>
    

        <device reference="gps" type="GPS">
            <ros>
                <topicName>/gps/fix</topicName>
                <alwaysOn>true</alwaysOn>
                <frameName>base_link</frameName>
            </ros>
        </device>
        <device reference="lidar" type="Lidar">
            <ros>
                <frameName>lidar_link</frameName>
                <enabled>true</enabled>
                <scanRate>10</scanRate>
                <topicName>/pc</topicName>
                <alwaysOn>true</alwaysOn>
            </ros>
        </device>
        <device reference="camera" type="Camera">
            <ros>
                <frameName>base_link</frameName>
                <enabled>true</enabled>
                <scanRate>10</scanRate>
                <topicName>/camera</topicName>
                <alwaysOn>true</alwaysOn>
            </ros>
        </device>

        <plugin type="webots_ros2_driver::Ros2IMU">
            <enabled>true</enabled>
            <topicName>/imu</topicName>
            <alwaysOn>true</alwaysOn>
            <frameName>base_link</frameName>
            <inertialUnitName>imu</inertialUnitName>
            <gyroName>gyro</gyroName>
            <accelerometerName>accel</accelerometerName>
        </plugin>

        <plugin type="simulation.driver.MyRobotDriver" />
    </webots>

    <material name="red">
        <color rgba="1 0 0 1"/>
      </material>
      <material name="blue">
        <color rgba="0 0 1 1"/>
      </material>

    <link name="base_link">
        <visual>
        <origin xyz="0 0 0"/>
            <geometry>
                <box size="1.2 0.7 0.2"/>
            </geometry>
            <material name="blue"/>
        </visual>
    </link>

    <joint name="base_link_to_lidar_link" type="fixed">
        <origin xyz="0 0 0.2" rpy="0 0.05 0"/>
        <parent link="base_link"/>
        <child link="lidar_link"/>
    </joint>
    <joint name="base_link_to_gps" type="fixed">
        <parent link="base_link"/>
        <child link="gps"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>
    <link name="gps">
    </link>

    <link name="lidar_link">
        <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <box size="0.1 0.1 0.1"/>
            </geometry>
        </visual>
    </link>

    <link name="fl_wheel">
        <visual>
        <origin xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.15" radius="0.19"/>
            </geometry>
            <material name="red"/>
        </visual>
    </link>

    <joint name="base_link_to_fl_wheel" type="fixed">
        <parent link="base_link"/>
        <child link="fl_wheel"/>
        <origin xyz="0.5 0.5 -0.2" rpy="1.5708 0 0"/>
    </joint>

    <link name="ml_wheel">
        <visual>
        <origin xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.15" radius="0.19"/>
            </geometry>
            <material name="red"/>
        </visual>
    </link>

    <joint name="base_link_to_ml_wheel" type="fixed">
        <parent link="base_link"/>
        <child link="ml_wheel"/>
        <origin xyz="0 0.5 -0.2" rpy="1.5708 0 0"/>
    </joint>
    <link name="bl_wheel">
        <visual>
        <origin xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.15" radius="0.19"/>
            </geometry>
            <material name="red"/>
        </visual>
    </link>

    <joint name="base_link_to_bl_wheel" type="fixed">
        <parent link="base_link"/>
        <child link="bl_wheel"/>
        <origin xyz="-0.5 0.5 -0.2" rpy="1.5708 0 0"/>
    </joint>
    
    <link name="fr_wheel">
        <visual>
        <origin xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.15" radius="0.19"/>
            </geometry>
            <material name="red"/>
        </visual>
    </link>

    <joint name="base_link_to_fr_wheel" type="fixed">
        <parent link="base_link"/>
        <child link="fr_wheel"/>
        <origin xyz="0.5 -0.5 -0.2" rpy="1.5708 0 0"/>
    </joint>

    <link name="mr_wheel">
        <visual>
        <origin xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.15" radius="0.19"/>
            </geometry>
            <material name="red"/>
        </visual>
    </link>

    <joint name="base_link_to_mr_wheel" type="fixed">
        <parent link="base_link"/>
        <child link="mr_wheel"/>
        <origin xyz="0 -0.5 -0.2" rpy="1.5708 0 0"/>
    </joint>
    <link name="br_wheel">
        <visual>
        <origin xyz="0 0 0"/>
            <geometry>
                <cylinder length="0.15" radius="0.19"/>
            </geometry>
            <material name="red"/>
        </visual>
    </link>

    <joint name="base_link_to_br_wheel" type="fixed">
        <parent link="base_link"/>
        <child link="br_wheel"/>
        <origin xyz="-0.5 -0.5 -0.2" rpy="1.5708 0 0"/>
    </joint>

</robot>